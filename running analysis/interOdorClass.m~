
stringa{1} = 'responses_3low.mat';
stringa{2} = 'responses_3mediumlow.mat';
stringa{3} = 'responses_3medium.mat';
stringa{4} = 'responses_3mediumhigh.mat';
stringa{5} = 'responses_3high.mat';

% stringa{1} = 'baselines_3low.mat';
% stringa{2} = 'baselines_3mediumlow.mat';
% stringa{3} = 'baselines_3medium.mat';
% stringa{4} = 'baselines_3mediumhigh.mat';
% stringa{5} = 'baselines_3high.mat';
%%
repetitions = 200;
dist4 = [];
dist300 = [];
accuracy = zeros(3,5);
for idxConc = 1:5
    load(stringa{idxConc});
    %real data
    dataAll = [];
    dataAll = responses4AllTrials;
    neurons = size(dataAll,1);
    trials = size(dataAll,2);
    stimuli = size(dataAll,3);
    dataAll = reshape(dataAll, neurons, trials .* stimuli);
    dataAll = sqrt(dataAll);
    dataAll = dataAll';
    dataAll(isinf(dataAll)) = 0;
    dataAll(isnan(dataAll)) = 0;
    dataAll = dataAll';
    dataAll = reshape(dataAll, neurons, trials, stimuli);
    labels      = ones(1,size(dataAll,2));
    app_labels  = labels;
    for odor = 1:size(dataAll,3) - 1
        labels  = [labels, app_labels + odor .* ones(1,size(dataAll,2))];
    end
    labels      = labels';
    trainingN = floor(0.9*(trials * stimuli));
    [mean_acc_svm, std_acc_svm, acc_svm, prctile25, prctile75] = odor_c_svm_1leaveout(dataAll, trainingN, labels, repetitions);
    accuracy(1:3,idxConc) = [mean_acc_svm; prctile25; prctile75];
    
    %shuffled data
    for idxShuffle = 1:200
        dataAll = [];
        dataAll = responses4AllTrials;
        neurons = size(dataAll,1);
        trials = size(dataAll,2);
        stimuli = size(dataAll,3);
        dataAll = reshape(dataAll, neurons, trials .* stimuli);
        dataAll = sqrt(dataAll);
        dataAll = dataAll';
        dataAll(isinf(dataAll)) = 0;
        dataAll(isnan(dataAll)) = 0;
        dataAll = dataAll';
        dataAll = reshape(dataAll, neurons, trials, stimuli);
        labels      = ones(1,size(dataAll,2));
        app_labels  = labels;
        for odor = 1:size(dataAll,3) - 1
            labels  = [labels, app_labels + odor .* ones(1,size(dataAll,2))];
        end
        labels      = labels';
        trainingN = floor(0.9*(trials * stimuli));
        [mean_acc_svm, std_acc_svm, acc_svm, prctile25, prctile75] = odor_c_svm_1leaveout(dataAll, trainingN, labels, repetitions);
        accuracyS(1:3,idxShuffle) = [mean_acc_svm; prctile25; prctile75];
    end
    accuracyShuffled(1:3,idxConc) = 
end
    
    
    
    


% Ldist4_mean = mean(dist4);
% Ldist4_75 = prctile(dist4,75);
% Ldist4_25 = prctile(dist4,25);
% 
% Ldist300_mean = mean(dist300);
% Ldist300_75 = prctile(dist300,75);
% Ldist300_25 = prctile(dist300,25);

%%
% interOdorDist4 = zeros(3, 5);
% interOdorDist300 = zeros(3, 5);
% 
% interOdorDist4(1,1) = Ldist4_mean;
% interOdorDist4(1,2) = MLdist4_mean;
% interOdorDist4(1,3) = Mdist4_mean;
% interOdorDist4(1,4) = MHdist4_mean;
% interOdorDist4(1,5) = Hdist4_mean;
% 
% interOdorDist4(2,1) = Ldist4_75;
% interOdorDist4(2,2) = MLdist4_75;
% interOdorDist4(2,3) = Mdist4_75;
% interOdorDist4(2,4) = MHdist4_75;
% interOdorDist4(2,5) = Hdist4_75;
% 
% interOdorDist4(3,1) = Ldist4_25;
% interOdorDist4(3,2) = MLdist4_25;
% interOdorDist4(3,3) = Mdist4_25;
% interOdorDist4(3,4) = MHdist4_25;
% interOdorDist4(3,5) = Hdist4_25;
% 
% interOdorDist300(1,1) = Ldist300_mean;
% interOdorDist300(1,2) = MLdist300_mean;
% interOdorDist300(1,3) = Mdist300_mean;
% interOdorDist300(1,4) = MHdist300_mean;
% interOdorDist300(1,5) = Hdist300_mean;
% 
% interOdorDist300(2,1) = Ldist300_75;
% interOdorDist300(2,2) = MLdist300_75;
% interOdorDist300(2,3) = Mdist300_75;
% interOdorDist300(2,4) = MHdist300_75;
% interOdorDist300(2,5) = Hdist300_75;
% 
% interOdorDist300(3,1) = Ldist300_25;
% interOdorDist300(3,2) = MLdist300_25;
% interOdorDist300(3,3) = Mdist300_25;
% interOdorDist300(3,4) = MHdist300_25;
% interOdorDist300(3,5) = Hdist300_25;
%%
save('interOdorClass.mat', 'interOdorDist4', 'interOdorDist300', 'dist4', 'dist300')



